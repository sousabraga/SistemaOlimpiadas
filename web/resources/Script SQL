CREATE DATABASE olimpiadas;

USE olimpiadas;

CREATE TABLE paises (
    codigo BIGINT NOT NULL AUTO_INCREMENT,
    nome VARCHAR(45) NOT NULL,
    CONSTRAINT pk_paises PRIMARY KEY (codigo),
    CONSTRAINT un_paises_nome UNIQUE (nome)
);

CREATE TABLE esportes (
    codigo BIGINT NOT NULL AUTO_INCREMENT,
    nome VARCHAR(45) NOT NULL,
    CONSTRAINT pk_esportes PRIMARY KEY (codigo),
    CONSTRAINT un_esportes_nome UNIQUE (nome)
);

CREATE TABLE paises_esportes (
    codigo BIGINT NOT NULL AUTO_INCREMENT,
    codigo_pais BIGINT NOT NULL,
    codigo_esporte BIGINT NOT NULL,
    medalha SMALLINT NOT NULL,
    CONSTRAINT pk_paises_esportes PRIMARY KEY (codigo),
    CONSTRAINT fk_paises_esportes_codigo_pais FOREIGN KEY (codigo_pais) REFERENCES paises (codigo) ON DELETE CASCADE,
    CONSTRAINT fk_paises_esportes_codigo_esporte FOREIGN KEY (codigo_esporte) REFERENCES esportes (codigo) ON DELETE CASCADE
);
